!function(){var t=document.createElement("style");t.innerHTML=".popup-title[data-v-c915b360]{font-size:.32rem;text-align:center;margin-top:.1rem}.popup-content[data-v-c915b360]{padding:1rem 0 0;font-size:.28rem;line-height:1.5}.popup-content[data-v-c915b360] .van-field{background-color:#f8f8f8;border-radius:.16rem;padding:.4rem .32rem}.footer[data-v-c915b360]{display:flex;justify-content:center;align-items:center;margin-top:1rem}.footer .btn[data-v-c915b360]{min-width:2.4rem}.footer .btn+.btn[data-v-c915b360]{margin-left:.4rem}.confirm-box[data-v-091171da]{padding:0 .4rem;margin:1rem 0 .3rem}.input-remark[data-v-091171da] .van-field__body{border:.01rem solid #878fbc;border-radius:.1rem;padding:.1rem .2rem}.popup-title[data-v-79195c08]{font-size:.32rem;text-align:center;margin-top:.1rem}.popup-content[data-v-79195c08]{padding:1rem 0 0;font-size:.28rem;line-height:1.5}.popup-content[data-v-79195c08] .van-field{background-color:#f8f8f8;border-radius:.16rem;padding:.4rem .32rem}.footer[data-v-79195c08]{display:flex;justify-content:center;align-items:center;margin-top:1rem}.footer .btn[data-v-79195c08]{min-width:2.4rem}.footer .btn+.btn[data-v-79195c08]{margin-left:.4rem}.fav-tabs-container[data-v-0f0fb118]{display:flex;align-items:center;justify-content:space-between}.fav-tabs[data-v-0f0fb118]{max-width:100vw}.table-list[data-v-0f0fb118]{font-size:.32rem;color:#1e2329;letter-spacing:0;font-weight:500;min-height:calc(100vh - 2.48rem);padding-bottom:.4rem}.table-list .table-item[data-v-0f0fb118]{display:flex;align-items:center;padding:0 .2rem}.table-list .table-item:not(.table-header)+.table-item[data-v-0f0fb118]{border-top:.02rem solid #F5F5F5}.table-list .table-item.table-header[data-v-0f0fb118]{font-size:.24rem;color:#999;letter-spacing:0;text-align:center;font-weight:400}.table-list .table-item.table-header .table-item_d[data-v-0f0fb118]{padding:.2rem 0}.table-list .table-item .table-item_d[data-v-0f0fb118]{padding:.3rem 0}.table-list .table-item .table-item_d .iconfont[data-v-0f0fb118]{font-size:.36rem;color:#888}.table-list .table-item .table-item_d .iconfont+.iconfont[data-v-0f0fb118]{margin-left:.3rem}.table-list .table-item .table-item_d .iconfont[data-v-0f0fb118]:active{opacity:.5}.table-list .table-item .table-item_d .iconfont.disabled[data-v-0f0fb118]{opacity:.3}.table-list .table-item .table-item_d[data-v-0f0fb118]:nth-child(1){flex:2.5;text-align:left;word-wrap:break-word}.table-list .table-item .table-item_d[data-v-0f0fb118]:nth-child(2){flex:1.5;text-align:center}.table-list .table-item .table-item_d[data-v-0f0fb118]:nth-child(3){flex:2;text-align:center}.table-list .table-item .table-item_d[data-v-0f0fb118]:nth-child(4){flex:1;text-align:center}.table-list .token-info[data-v-0f0fb118]{display:flex;align-items:center}.table-list .token-info .icon-collect[data-v-0f0fb118]{font-size:.32rem;color:#ccc;cursor:pointer;margin-right:.1rem}.table-list .token-info .icon-collect.collected[data-v-0f0fb118]{color:#558bed}.table-list .token-info .token-network[data-v-0f0fb118]{border:.02rem solid #878fbc;border-radius:.2rem;font-size:.24rem;color:#878fbc;padding:.04rem .1rem;margin-left:.1rem}.table-list .token-info .token-icon[data-v-0f0fb118]{margin-right:.18rem;border-radius:50%}.btn-add[data-v-0f0fb118]{position:sticky;bottom:0;padding:.3rem .8rem;background-color:#fff;box-shadow:0 0 .2rem #eee}.btn-add .button[data-v-0f0fb118]{border-radius:.16rem}.icon-add-o[data-v-0f0fb118]{color:#558bed;margin-right:.1rem}.add-text[data-v-0f0fb118]{color:#558bed}.select-btn[data-v-0f0fb118]{background-color:transparent;color:#878fbc;border:none}.token-symbol[data-v-0f0fb118]{word-wrap:break-word}.fav-tabs-container[data-v-2d249f2d]{display:flex;align-items:center;justify-content:space-between}.fav-tabs[data-v-2d249f2d]{max-width:100vw}.table-list[data-v-2d249f2d]{font-size:.32rem;color:#1e2329;letter-spacing:0;font-weight:500;min-height:calc(100vh - 2.48rem);padding-bottom:.4rem}.table-list .table-item[data-v-2d249f2d]{display:flex;align-items:center;padding:0 .2rem}.table-list .table-item:not(.table-header)+.table-item[data-v-2d249f2d]{border-top:.02rem solid #F5F5F5}.table-list .table-item.table-header[data-v-2d249f2d]{font-size:.24rem;color:#999;letter-spacing:0;text-align:center;font-weight:400}.table-list .table-item.table-header .table-item_d[data-v-2d249f2d]{padding:.2rem 0}.table-list .table-item .table-item_d[data-v-2d249f2d]{padding:.3rem 0}.table-list .table-item .table-item_d .iconfont[data-v-2d249f2d]{font-size:.36rem;color:#888}.table-list .table-item .table-item_d .iconfont+.iconfont[data-v-2d249f2d]{margin-left:.3rem}.table-list .table-item .table-item_d .iconfont[data-v-2d249f2d]:active{opacity:.5}.table-list .table-item .table-item_d .iconfont.disabled[data-v-2d249f2d]{opacity:.3}.table-list .table-item .table-item_d[data-v-2d249f2d]:nth-child(1){flex:2.5;text-align:left;word-wrap:break-word}.table-list .table-item .table-item_d[data-v-2d249f2d]:nth-child(2){flex:1.5;text-align:center}.table-list .table-item .table-item_d[data-v-2d249f2d]:nth-child(3){flex:2;text-align:center}.table-list .table-item .table-item_d[data-v-2d249f2d]:nth-child(4){flex:1;text-align:center}.table-list .token-info[data-v-2d249f2d]{display:flex;align-items:center}.table-list .token-info .icon-collect[data-v-2d249f2d]{font-size:.32rem;color:#ccc;cursor:pointer;margin-right:.1rem}.table-list .token-info .icon-collect.collected[data-v-2d249f2d]{color:#558bed}.table-list .token-info .token-network[data-v-2d249f2d]{border:.02rem solid #878fbc;border-radius:.2rem;font-size:.24rem;color:#878fbc;padding:.04rem .1rem;margin-left:.1rem}.table-list .token-info .token-icon[data-v-2d249f2d]{margin-right:.18rem;border-radius:50%}.btn-add[data-v-2d249f2d]{position:sticky;bottom:0;padding:.3rem .8rem;background-color:#fff;box-shadow:0 0 .2rem #eee}.btn-add .button[data-v-2d249f2d]{border-radius:.16rem}.icon-add-o[data-v-2d249f2d]{color:#558bed;margin-right:.1rem}.add-text[data-v-2d249f2d]{color:#558bed}.select-btn[data-v-2d249f2d]{background-color:transparent;color:#878fbc;border:none}.token-symbol[data-v-2d249f2d]{word-wrap:break-word;word-break:break-word}[data-v-3bb63cbc] .van-hairline--bottom:after{border-bottom:.02rem solid rgba(135,143,188,.3)}[data-v-3bb63cbc] .van-tabs--card .van-tabs__nav{border-color:#878fbc!important}[data-v-3bb63cbc] .van-tabs--card .van-tabs__nav .van-tab{padding:0 .3rem}[data-v-3bb63cbc] .van-nav-bar__title{max-width:85%}[data-v-3bb63cbc] .van-nav-bar__right{padding:0 .1rem}.select-btn[data-v-3bb63cbc]{background-color:transparent;color:#878fbc;border:none}\n",document.head.appendChild(t),System.register(["./index-legacy.f19bf61d.js"],(function(t){"use strict";var e,i,a,s,o,n,l,r,c,d,h,m,f,u,p,b,v,g,y,k,$,_,G,F,w,C,x,T,S,U,N,L,z,R,I,V,D,E;return{setters:[function(t){e=t._,i=t.r,a=t.o,s=t.e,o=t.w,n=t.h,l=t.t,r=t.b,c=t.k,d=t.z,h=t.A,m=t.c,f=t.F,u=t.d,p=t.j,b=t.m,v=t.B,g=t.C,y=t.D,k=t.E,$=t.G,_=t.H,G=t.I,F=t.J,w=t.K,C=t.l,x=t.v,T=t.y,S=t.L,U=t.M,N=t.N,L=t.O,z=t.P,R=t.Q,I=t.R,V=t.S,D=t.U,E=t.V}],execute:function(){const B={name:"Rename",props:{visible:Boolean,confirmSubmit:Function},emits:["update:visible","onSubmit"],data(){return{title:"",rules:[{required:!0,message:this.$t("enterGroupName")},{validator:t=>t?.length<=10,message:this.$t("maximum10characters")}]}},computed:{dialogVisible:{get(){return this.visible},set(t){this.$emit("update:visible",t)}}},watch:{visible(t){t&&(this.title="")}},methods:{onSubmit(){this.confirmSubmit(this.title)}}},M={class:"popup-title"},j={class:"footer"};var A=e(B,[["render",function(t,e,d,h,m,f){const u=i("van-field"),p=i("van-button"),b=i("van-form"),v=i("van-popup");return a(),s(v,{show:f.dialogVisible,"onUpdate:show":e[2]||(e[2]=t=>f.dialogVisible=t),class:"popup-container",closeable:!0,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%"}},{default:o((()=>[n("h3",M,l(t.$t("enterGroupName")),1),r(b,{class:"popup-content",onSubmit:f.onSubmit},{default:o((()=>[r(u,{modelValue:m.title,"onUpdate:modelValue":e[0]||(e[0]=t=>m.title=t),label:"",placeholder:t.$t("maximum10characters"),clearable:"",rules:m.rules},null,8,["modelValue","placeholder","rules"]),n("div",j,[r(p,{class:"btn",type:"default",round:"",onClick:e[1]||(e[1]=t=>f.dialogVisible=!1)},{default:o((()=>[c(l(t.$t("cancel")),1)])),_:1}),r(p,{class:"btn","native-type":"submit",type:"primary",round:""},{default:o((()=>[c(l(t.$t("confirm1")),1)])),_:1})])])),_:1},8,["onSubmit"])])),_:1},8,["show"])}],["__scopeId","data-v-c915b360"]]);const q={name:"ChangeGroup",props:{visible:Boolean,title:{type:String,default:""},type:{type:String,default:"1"},isRemark:{type:Boolean,default:!1},selected:{type:[String,Number],default:0},groups:{type:Array,default:()=>[]}},components:{ChangeName:A},emits:["update:visible","update:selected","select"],data(){return{checked:this.initSelected,visible1:!1,remark:""}},computed:{show:{get(){return this.visible},set(t){this.$emit("update:visible",t)}},initSelected:{get(){return this.selected},set(t){this.$emit("update:selected",t)}}},watch:{show(t){t&&(this.checked=this.initSelected)}},methods:{select(){this.isRemark?this.$emit("select",this.checked,this.remark):this.$emit("select",this.checked)},addFavoriteGroup(t){"1"===this.type?this.addTokenFavoriteGroup(t):"2"===this.type&&this.addNftFavoriteGroup(t)},addTokenFavoriteGroup(t){if(!this.$f.verifyLogin())return;let e=this.$toast.loading({forbidClick:!0,duration:0});d(t).then((t=>{t?(this.$store.dispatch("getUserTokenFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")}),this.visible1=!1):this.$notify({type:"danger",message:this.$t("fail")})})).catch((t=>{console.log(t),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{e.clear()}))},addNftFavoriteGroup(t){if(!this.$f.verifyLogin())return;let e=this.$toast.loading({forbidClick:!0,duration:0});h(t).then((t=>{t?(this.$store.dispatch("getUserNftFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")}),this.visible1=!1):this.$notify({type:"danger",message:this.$t("fail")})})).catch((t=>{console.log(t),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{e.clear()}))}}},H={class:"confirm-box"};var J=e(q,[["render",function(t,e,d,h,v,g){const y=i("van-radio"),k=i("van-cell"),$=i("van-field"),_=i("van-cell-group"),G=i("van-radio-group"),F=i("van-button"),w=i("van-action-sheet"),C=i("ChangeName");return a(),m(f,null,[r(w,{show:g.show,"onUpdate:show":e[4]||(e[4]=t=>g.show=t),description:"",title:d.title,teleport:"#app"},{default:o((()=>[r(G,{modelValue:v.checked,"onUpdate:modelValue":e[3]||(e[3]=t=>v.checked=t)},{default:o((()=>[r(_,null,{default:o((()=>[r(k,{title:t.$t("defaultGroup"),clickable:"",onClick:e[0]||(e[0]=t=>v.checked=0)},{"right-icon":o((()=>[r(y,{name:0})])),_:1},8,["title"]),(a(!0),m(f,null,u(d.groups,((t,e)=>(a(),s(k,{key:e,title:t.name,clickable:"",onClick:e=>v.checked=t.group_id},{"right-icon":o((()=>[r(y,{name:t.group_id},null,8,["name"])])),_:2},1032,["title","onClick"])))),128)),r(k,{title:t.$t("newGroup"),onClick:e[1]||(e[1]=t=>v.visible1=!0),clickable:"",icon:"add-o"},null,8,["title"]),d.isRemark?(a(),s($,{key:0,class:"input-remark",modelValue:v.remark,"onUpdate:modelValue":e[2]||(e[2]=t=>v.remark=t),rows:"1",autosize:"",label:"",type:"textarea",placeholder:t.$t("enterRemark")},null,8,["modelValue","placeholder"])):p("",!0)])),_:1})])),_:1},8,["modelValue"]),n("div",H,[r(F,{type:"primary",onClick:b(g.select,["stop"]),round:"",block:""},{default:o((()=>[c(l(t.$t("confirm1")),1)])),_:1},8,["onClick"])])])),_:1},8,["show","title"]),r(C,{visible:v.visible1,"onUpdate:visible":e[5]||(e[5]=t=>v.visible1=t),confirmSubmit:g.addFavoriteGroup},null,8,["visible","confirmSubmit"])],64)}],["__scopeId","data-v-091171da"]]);const K={name:"EditRemark",props:{visible:Boolean,confirmSubmit:Function,initRemark:String},emits:["update:visible","onSubmit"],data(){return{title:this.initRemark||"",rules:[{required:!0,message:this.$t("enterRemark")},{validator:t=>t?.length<=50,message:this.$t("maximum50characters")}]}},computed:{dialogVisible:{get(){return this.visible},set(t){this.$emit("update:visible",t)}}},watch:{visible(t){t&&(this.title=this.initRemark||"")}},methods:{onSubmit(){this.confirmSubmit(this.title)}}},O={class:"popup-title"},P={class:"footer"};var Q=e(K,[["render",function(t,e,d,h,m,f){const u=i("van-field"),p=i("van-button"),b=i("van-form"),v=i("van-popup");return a(),s(v,{show:f.dialogVisible,"onUpdate:show":e[2]||(e[2]=t=>f.dialogVisible=t),class:"popup-container",closeable:!0,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%"}},{default:o((()=>[n("h3",O,l(t.$t("editRemark")),1),r(b,{class:"popup-content",onSubmit:f.onSubmit},{default:o((()=>[r(u,{modelValue:m.title,"onUpdate:modelValue":e[0]||(e[0]=t=>m.title=t),label:"",placeholder:t.$t("maximum50characters"),clearable:"",rules:m.rules},null,8,["modelValue","placeholder","rules"]),n("div",P,[r(p,{class:"btn",type:"default",round:"",onClick:e[1]||(e[1]=t=>f.dialogVisible=!1)},{default:o((()=>[c(l(t.$t("cancel")),1)])),_:1}),r(p,{class:"btn","native-type":"submit",type:"primary",round:""},{default:o((()=>[c(l(t.$t("confirm1")),1)])),_:1})])])),_:1},8,["onSubmit"])])),_:1},8,["show"])}],["__scopeId","data-v-79195c08"]]);const W={name:"TokenFavoriteManage",props:{active:{type:String,default:"1"},activeType:{type:String,default:"1"}},components:{ChangeGroup:J,ChangeName:A,EditRemark:Q},data:()=>({activeGroup:0,visible1:!1,visible2:!1,visible3:!1,visible4:!1,selectedToken:{},favoritesList:[],curGroup:{},show:!1,actions:[{name:"Token",value:"1"},{name:"NFT",value:"2"}],curRemark:"",curToken:{}}),computed:{groups(){return this.$store.state.userFavoriteGroups}},watch:{activeType(t){"1"===t&&this.getUserFavorites()},activeGroup(){this.getUserFavorites()},groups:{handler(){this.activeGroup=0},deep:!0},"$store.state.currentAccount"(t){t&&this.getUserFavorites()}},created(){this.init()},methods:{init(){this.$store.dispatch("getUserTokenFavoriteGroups"),this.getUserFavorites()},async getUserFavorites(){this.favoritesList=(await v(this.activeGroup).catch((async()=>[]))).map((t=>({...t,id:t.token+"-"+t.chain,address:t.token,network:t.chain,priceChange24h:t?.price_change?t?.price_change/100:0,priceUSD:t?.current_price_usd||0})))},switchGroup(t){this.selectedToken=t,this.visible1=!0},tokenSetTop(t,e){if(0===e)return;let i=this.$toast.loading({forbidClick:!0,duration:0});g(t.token+"-"+t.chain,this.activeGroup).then((t=>{this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")})})).catch((()=>{this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{i.clear()}))},changeFavoritesIndex(t,e,i){if(!this.$f.verifyLogin())return;let a=t.token+"-"+t.chain,s=e+i;if(s<0||s+1>this.favoritesList.length)return;let o=this.favoritesList[s],n=o.token+"-"+o.chain,l=this.$toast.loading({forbidClick:!0,duration:0});y(a,n,this.activeGroup).then((t=>{t?(this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})})).catch((t=>{console.log(t),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{l.clear()}))},confirmSwitchGroup(t){if(this.$f.verifyLogin())if(this.activeGroup!==t){let e=this.$toast.loading({forbidClick:!0,duration:0});k(this.selectedToken.token+"-"+this.selectedToken.chain,t).then((t=>{t?(this.getUserFavorites(),this.$store.dispatch("getUserFavorites"),this.$notify({type:"success",message:this.$t("success")}),this.visible1=!1):this.$notify({type:"danger",message:this.$t("fail")})})).catch((t=>{console.log(t),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{e.clear()}))}else this.visible1=!1},addFavoriteGroup(t){if(!this.$f.verifyLogin())return;let e=this.$toast.loading({forbidClick:!0,duration:0});d(t).then((t=>{t?(this.$store.dispatch("getUserTokenFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")}),this.visible2=!1):this.$notify({type:"danger",message:this.$t("fail")})})).catch((t=>{console.log(t),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{e.clear()}))},removeFavoriteGroup(t){this.$f.verifyLogin()&&this.$dialog.confirm({title:this.$t("tips"),message:this.$t("removeFavGroupTips"),confirmButtonText:this.$t("confirm"),cancelButtonText:this.$t("cancel")}).then((()=>{let e=this.$toast.loading({forbidClick:!0,duration:0});$(t.group_id).then((t=>{t?(this.$store.dispatch("getUserTokenFavoriteGroups"),this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")}),this.visible2=!1):this.$notify({type:"danger",message:this.$t("fail")})})).catch((t=>{console.log(t),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{e.clear()}))})).catch((()=>{}))},setTopFavoriteGroup(t,e){if(!this.$f.verifyLogin())return;if(0===e)return;let i=this.$toast.loading({forbidClick:!0,duration:0});_(t.group_id).then((t=>{this.$store.dispatch("getUserTokenFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")})})).catch((()=>{this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{i.clear()}))},changeIndexFavoriteGroup(t,e,i){if(!this.$f.verifyLogin())return;let a=t.group_id,s=e+i;if(s<0||s+1>this.groups.length)return;let o=this.groups[s].group_id,n=this.$toast.loading({forbidClick:!0,duration:0});G(a,o).then((t=>{t?(this.$store.dispatch("getUserTokenFavoriteGroups"),this.visible3=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})})).catch((t=>{console.log(t),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{n.clear()}))},rename(t){this.curGroup=t,this.visible3=!0},changeFavoriteGroupName(t){if(!this.$f.verifyLogin())return;let e=this.$toast.loading({forbidClick:!0,duration:0});F(t,this.curGroup.group_id).then((t=>{t?(this.$store.dispatch("getUserTokenFavoriteGroups"),this.visible3=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})})).catch((t=>{console.log(t),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{e.clear()}))},select(t){this.activeType=t.value},handleEditRemark(t){this.curRemark=t.remark||"",this.curToken=t,this.visible4=!0},confirmEditRemark(t){if(!this.$f.verifyLogin())return;let e=this.$toast.loading({forbidClick:!0,duration:0}),i=this.curToken.token+"-"+this.curToken.chain;w(i,t).then((t=>{t?(this.getUserFavorites(),this.visible4=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})})).catch((t=>{console.log(t),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{e.clear()}))}}},X={key:0},Y={class:"fav-tabs-container"},Z={class:"table-list"},tt={class:"table-item table-header"},et={class:"table-item_d"},it={class:"table-item_d"},at={class:"table-item_d"},st={class:"table-item_d"},ot={class:"table-item"},nt={class:"token-info table-item_d"},lt={class:"icon-token-container"},rt=["src"],ct={class:"token-symbol"},dt={class:"table-item_d"},ht=["onClick"],mt={class:"table-item_d token-sort"},ft=["onClick"],ut=["onClick"],pt=["onClick"],bt={class:"table-item_d"},vt=["onClick"],gt={key:1},yt={class:"add-text"},kt={class:"table-list"},$t={class:"table-item table-header"},_t={class:"table-item_d"},Gt={class:"table-item_d"},Ft={class:"table-item_d"},wt={class:"table-item_d"},Ct={class:"table-item_d"},xt={class:"table-item_d"},Tt=["onClick"],St={class:"table-item_d"},Ut=["onClick"],Nt=["onClick"],Lt=["onClick"],zt={class:"table-item_d"},Rt=["onClick"];var It=e(W,[["render",function(t,e,c,d,h,v){const g=i("van-tab"),y=i("van-tabs"),k=i("van-image"),$=i("DynamicScrollerItem"),_=i("DynamicScroller"),G=i("van-empty"),F=i("van-icon"),w=i("van-cell"),S=i("ChangeGroup"),U=i("ChangeName"),N=i("EditRemark"),L=i("van-action-sheet");return a(),m(f,null,["1"===c.active?(a(),m("section",X,[n("div",Y,[r(y,{class:"fav-tabs",active:h.activeGroup,"onUpdate:active":e[0]||(e[0]=t=>h.activeGroup=t),border:"",color:"#558BED",ellipsis:!1,background:"transparent"},{default:o((()=>[r(g,{title:t.$t("defaultGroup"),name:0},null,8,["title"]),(a(!0),m(f,null,u(v.groups,((t,e)=>(a(),s(g,{key:e,title:t.name,name:t.group_id},null,8,["title","name"])))),128))])),_:1},8,["active"])]),n("ul",Z,[n("li",tt,[n("div",et,l(t.$t("token")),1),n("div",it,l(t.$t("changeGroup")),1),n("div",at,l(t.$t("sort")),1),n("div",st,l(t.$t("remark")),1)]),h.favoritesList?.length>0?(a(),s(_,{key:0,items:h.favoritesList,"min-item-size":30,"page-mode":"",class:"scroller"},{default:o((({item:e,index:i,active:c})=>[r($,{item:e,active:c,"data-index":i},{default:o((()=>[n("li",ot,[n("div",nt,[n("div",lt,[(a(),s(k,{key:e.token+e.chain,round:"",width:"0.5rem",height:"0.5rem","icon-size":"0.5rem","lazy-load":"","show-loading":"",src:t.$f.formatIcon(e),"error-icon":t.iconDefault},null,8,["src","error-icon"])),e.chain?(a(),m("img",{key:0,class:"icon-svg icon-network",src:`${t.$store.state.s3BaseUrl}chain/${e.chain}.png`,alt:"",srcset:""},null,8,rt)):p("",!0)]),n("span",ct,l(e.symbol),1)]),n("div",dt,[n("i",{class:"iconfont icon-tiaozhengzu",onClick:b((t=>v.switchGroup(e)),["stop"])},null,8,ht)]),n("div",mt,[n("i",{class:C(["iconfont icon-zhiding",{disabled:0===i}]),onClick:b((t=>v.tokenSetTop(e,i)),["stop"])},null,10,ft),n("i",{class:C(["iconfont icon-shangyi",{disabled:0===i}]),onClick:b((t=>v.changeFavoritesIndex(e,i,-1)),["stop"])},null,10,ut),n("i",{class:C(["iconfont icon-xiayi",{disabled:i+1===h.favoritesList.length}]),onClick:b((t=>v.changeFavoritesIndex(e,i,1)),["stop"])},null,10,pt)]),n("div",bt,[n("i",{class:"iconfont icon-zhongmingming",onClick:b((t=>v.handleEditRemark(e)),["stop"])},null,8,vt)])])])),_:2},1032,["item","active","data-index"])])),_:1},8,["items"])):p("",!0),x(r(G,{class:"empty",image:t.emptyNoDataLight,description:t.$t("emptyData")},null,8,["image","description"]),[[T,h.favoritesList&&0===h.favoritesList.length||!v.groups]])])])):"2"===c.active?(a(),m("section",gt,[r(w,{title:"",onClick:e[1]||(e[1]=t=>h.visible2=!0),clickable:""},{value:o((()=>[r(F,{class:"icon-add-o",name:"add-o"}),n("span",yt,l(t.$t("newGroup")),1)])),_:1}),n("ul",kt,[n("li",$t,[n("div",_t,l(t.$t("groupName")),1),n("div",Gt,l(t.$t("rename")),1),n("div",Ft,l(t.$t("sort")),1),n("div",wt,l(t.$t("operate")),1)]),(a(!0),m(f,null,u(v.groups,((t,e)=>(a(),m("li",{key:e,class:"table-item"},[n("div",Ct,l(t.name),1),n("div",xt,[n("i",{class:"iconfont icon-zhongmingming",onClick:b((e=>v.rename(t)),["stop"])},null,8,Tt)]),n("div",St,[n("i",{class:C(["iconfont icon-zhiding",{disabled:0===e}]),onClick:b((i=>v.setTopFavoriteGroup(t,e)),["stop"])},null,10,Ut),n("i",{class:C(["iconfont icon-shangyi",{disabled:0===e}]),onClick:b((i=>v.changeIndexFavoriteGroup(t,e,-1)),["stop"])},null,10,Nt),n("i",{class:C(["iconfont icon-xiayi",{disabled:e+1===v.groups.length}]),onClick:b((i=>v.changeIndexFavoriteGroup(t,e,1)),["stop"])},null,10,Lt)]),n("div",zt,[n("i",{class:"iconfont icon-ashbin",onClick:b((e=>v.removeFavoriteGroup(t)),["stop"])},null,8,Rt)])])))),128)),x(r(G,{class:"empty",image:t.emptyNoDataLight,description:t.$t("emptyData")},null,8,["image","description"]),[[T,v.groups&&0===v.groups.length||!v.groups]])])])):p("",!0),r(S,{visible:h.visible1,"onUpdate:visible":e[2]||(e[2]=t=>h.visible1=t),selected:h.activeGroup,"onUpdate:selected":e[3]||(e[3]=t=>h.activeGroup=t),title:t.$t("pleaseSelectGroup"),groups:v.groups,onSelect:v.confirmSwitchGroup},null,8,["visible","selected","title","groups","onSelect"]),r(U,{visible:h.visible2,"onUpdate:visible":e[4]||(e[4]=t=>h.visible2=t),confirmSubmit:v.addFavoriteGroup},null,8,["visible","confirmSubmit"]),r(U,{visible:h.visible3,"onUpdate:visible":e[5]||(e[5]=t=>h.visible3=t),confirmSubmit:v.changeFavoriteGroupName},null,8,["visible","confirmSubmit"]),r(N,{visible:h.visible4,"onUpdate:visible":e[6]||(e[6]=t=>h.visible4=t),initRemark:h.curRemark,confirmSubmit:v.confirmEditRemark},null,8,["visible","initRemark","confirmSubmit"]),r(L,{show:h.show,"onUpdate:show":e[7]||(e[7]=t=>h.show=t),actions:h.actions,"cancel-text":t.$t("cancel"),onSelect:v.select,"close-on-click-action":""},null,8,["show","actions","cancel-text","onSelect"])],64)}],["__scopeId","data-v-0f0fb118"]]);const Vt={name:"NftFavoriteManage",props:{active:{type:String,default:"1"},activeType:{type:String,default:"1"}},components:{ChangeGroup:J,ChangeName:A,EditRemark:Q},data:()=>({activeGroup:0,visible1:!1,visible2:!1,visible3:!1,visible4:!1,selectedToken:{},favoritesList:[],curGroup:{},show:!1,actions:[{name:"Token",value:"1"},{name:"NFT",value:"2"}],curRemark:"",curToken:{}}),computed:{groups(){return this.$store.state.userNftFavoriteGroups},activeName(){return{1:"Token",2:"NFT"}?.[this.activeType]||"Token"}},watch:{activeType(t){"2"===t&&this.getUserFavorites()},activeGroup(){this.getUserFavorites()},groups:{handler(){this.activeGroup=0},deep:!0},"$store.state.currentAccount"(t){t&&this.getUserFavorites()}},created(){this.init()},methods:{init(){this.$store.dispatch("getUserNftFavoriteGroups"),this.getUserFavorites()},async getUserFavorites(){this.favoritesList=await S(this.activeGroup).catch((async()=>[]))},switchGroup(t){this.selectedToken=t,this.visible1=!0},tokenSetTop(t,e){if(0===e)return;let i=this.$toast.loading({forbidClick:!0,duration:0});U(t.id,this.activeGroup).then((t=>{this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")})})).catch((()=>{this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{i.clear()}))},changeNftFavoritesIndex(t,e,i){if(!this.$f.verifyLogin())return;let a=t.id,s=e+i;if(s<0||s+1>this.favoritesList.length)return;let o=this.favoritesList[s].id,n=this.$toast.loading({forbidClick:!0,duration:0});N(a,o,this.activeGroup).then((t=>{t?(this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})})).catch((t=>{console.log(t),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{n.clear()}))},confirmSwitchGroup(t){if(this.$f.verifyLogin())if(this.activeGroup!==t){let e=this.$toast.loading({forbidClick:!0,duration:0});L(this.selectedToken.id,t).then((t=>{t?(this.getUserFavorites(),this.$store.dispatch("getUserFavorites"),this.$notify({type:"success",message:this.$t("success")}),this.visible1=!1):this.$notify({type:"danger",message:this.$t("fail")})})).catch((t=>{console.log(t),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{e.clear()}))}else this.visible1=!1},addNftFavoriteGroup(t){if(!this.$f.verifyLogin())return;let e=this.$toast.loading({forbidClick:!0,duration:0});h(t).then((t=>{t?(this.$store.dispatch("getUserNftFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")}),this.visible2=!1):this.$notify({type:"danger",message:this.$t("fail")})})).catch((t=>{console.log(t),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{e.clear()}))},removeNftFavoriteGroup(t){this.$f.verifyLogin()&&this.$dialog.confirm({title:this.$t("tips"),message:this.$t("removeFavGroupTips"),confirmButtonText:this.$t("confirm"),cancelButtonText:this.$t("cancel")}).then((()=>{let e=this.$toast.loading({forbidClick:!0,duration:0});z(t.group_id).then((t=>{t?(this.$store.dispatch("getUserNftFavoriteGroups"),this.getUserFavorites(),this.$notify({type:"success",message:this.$t("success")}),this.visible2=!1):this.$notify({type:"danger",message:this.$t("fail")})})).catch((t=>{console.log(t),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{e.clear()}))})).catch((()=>{}))},setTopNftFavoriteGroup(t,e){if(!this.$f.verifyLogin())return;if(0===e)return;let i=this.$toast.loading({forbidClick:!0,duration:0});R(t.group_id).then((t=>{this.$store.dispatch("getUserNftFavoriteGroups"),this.$notify({type:"success",message:this.$t("success")})})).catch((()=>{this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{i.clear()}))},changeIndexNftFavoriteGroup(t,e,i){if(!this.$f.verifyLogin())return;let a=t.group_id,s=e+i;if(s<0||s+1>this.groups.length)return;let o=this.groups[s].group_id,n=this.$toast.loading({forbidClick:!0,duration:0});I(a,o).then((t=>{t?(this.$store.dispatch("getUserNftFavoriteGroups"),this.visible3=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})})).catch((t=>{console.log(t),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{n.clear()}))},rename(t){this.curGroup=t,this.visible3=!0},changeNftFavoriteGroupName(t){if(!this.$f.verifyLogin())return;let e=this.$toast.loading({forbidClick:!0,duration:0});V(t,this.curGroup.group_id).then((t=>{t?(this.$store.dispatch("getUserNftFavoriteGroups"),this.visible3=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})})).catch((t=>{console.log(t),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{e.clear()}))},select(t){this.activeType=t.value},handleEditRemark(t){this.curRemark=t.remark||"",this.curToken=t,this.visible4=!0},confirmEditRemark(t){if(!this.$f.verifyLogin())return;let e=this.$toast.loading({forbidClick:!0,duration:0});D(this.curToken.id,t).then((t=>{t?(this.getUserFavorites(),this.visible4=!1,this.$notify({type:"success",message:this.$t("success")})):this.$notify({type:"danger",message:this.$t("fail")})})).catch((t=>{console.log(t),this.$notify({type:"danger",message:this.$t("fail")})})).finally((()=>{e.clear()}))}}},Dt={key:0},Et={class:"fav-tabs-container"},Bt={class:"table-list"},Mt={class:"table-item table-header"},jt={class:"table-item_d"},At={class:"table-item_d"},qt={class:"table-item_d"},Ht={class:"table-item_d"},Jt={class:"table-item"},Kt={class:"token-info table-item_d"},Ot={class:"icon-token-container"},Pt={class:"token-symbol"},Qt={class:"table-item_d"},Wt=["onClick"],Xt={class:"table-item_d token-sort"},Yt=["onClick"],Zt=["onClick"],te=["onClick"],ee={class:"table-item_d"},ie=["onClick"],ae={key:1},se={class:"add-text"},oe={class:"table-list"},ne={class:"table-item table-header"},le={class:"table-item_d"},re={class:"table-item_d"},ce={class:"table-item_d"},de={class:"table-item_d"},he={class:"table-item_d"},me={class:"table-item_d"},fe=["onClick"],ue={class:"table-item_d"},pe=["onClick"],be=["onClick"],ve=["onClick"],ge={class:"table-item_d"},ye=["onClick"];var ke=e(Vt,[["render",function(t,e,c,d,h,v){const g=i("van-tab"),y=i("van-tabs"),k=i("van-image"),$=i("DynamicScrollerItem"),_=i("DynamicScroller"),G=i("van-empty"),F=i("van-icon"),w=i("van-cell"),S=i("ChangeGroup"),U=i("ChangeName"),N=i("EditRemark");return a(),m(f,null,["1"===c.active?(a(),m("section",Dt,[n("div",Et,[r(y,{class:"fav-tabs",active:h.activeGroup,"onUpdate:active":e[0]||(e[0]=t=>h.activeGroup=t),border:"",color:"#558BED",ellipsis:!1,background:"transparent"},{default:o((()=>[r(g,{title:t.$t("defaultGroup"),name:0},null,8,["title"]),(a(!0),m(f,null,u(v.groups,((t,e)=>(a(),s(g,{key:e,title:t.name,name:t.group_id},null,8,["title","name"])))),128))])),_:1},8,["active"])]),n("ul",Bt,[n("li",Mt,[n("div",jt,l(t.$t("token")),1),n("div",At,l(t.$t("changeGroup")),1),n("div",qt,l(t.$t("sort")),1),n("div",Ht,l(t.$t("remark")),1)]),h.favoritesList?.length>0?(a(),s(_,{key:0,items:h.favoritesList,"min-item-size":30,keyField:"id","page-mode":"",class:"scroller"},{default:o((({item:e,index:i,active:a})=>[r($,{item:e,active:a,"data-index":i},{default:o((()=>[n("li",Jt,[n("div",Kt,[n("div",Ot,[r(k,{round:"",width:"0.72rem",height:"0.72rem","icon-size":"0.72rem","lazy-load":"","show-loading":"",src:e?.logo||t.iconDefault,"error-icon":t.iconDefault},null,8,["src","error-icon"])]),n("span",Pt,l(e?.name||""),1)]),n("div",Qt,[n("i",{class:"iconfont icon-tiaozhengzu",onClick:b((t=>v.switchGroup(e)),["stop"])},null,8,Wt)]),n("div",Xt,[n("i",{class:C(["iconfont icon-zhiding",{disabled:0===i}]),onClick:b((t=>v.tokenSetTop(e,i)),["stop"])},null,10,Yt),n("i",{class:C(["iconfont icon-shangyi",{disabled:0===i}]),onClick:b((t=>v.changeNftFavoritesIndex(e,i,-1)),["stop"])},null,10,Zt),n("i",{class:C(["iconfont icon-xiayi",{disabled:i+1===h.favoritesList.length}]),onClick:b((t=>v.changeNftFavoritesIndex(e,i,1)),["stop"])},null,10,te)]),n("div",ee,[n("i",{class:"iconfont icon-zhongmingming",onClick:b((t=>v.handleEditRemark(e)),["stop"])},null,8,ie)])])])),_:2},1032,["item","active","data-index"])])),_:1},8,["items"])):p("",!0),x(r(G,{class:"empty",image:t.emptyNoDataLight,description:t.$t("emptyData")},null,8,["image","description"]),[[T,h.favoritesList&&0===h.favoritesList.length||!v.groups]])])])):"2"===c.active?(a(),m("section",ae,[r(w,{title:"",onClick:e[1]||(e[1]=t=>h.visible2=!0),clickable:""},{value:o((()=>[r(F,{class:"icon-add-o",name:"add-o"}),n("span",se,l(t.$t("newGroup")),1)])),_:1}),n("ul",oe,[n("li",ne,[n("div",le,l(t.$t("groupName")),1),n("div",re,l(t.$t("rename")),1),n("div",ce,l(t.$t("sort")),1),n("div",de,l(t.$t("operate")),1)]),(a(!0),m(f,null,u(v.groups,((t,e)=>(a(),m("li",{key:e,class:"table-item"},[n("div",he,l(t.name),1),n("div",me,[n("i",{class:"iconfont icon-zhongmingming",onClick:b((e=>v.rename(t)),["stop"])},null,8,fe)]),n("div",ue,[n("i",{class:C(["iconfont icon-zhiding",{disabled:0===e}]),onClick:b((i=>v.setTopNftFavoriteGroup(t,e)),["stop"])},null,10,pe),n("i",{class:C(["iconfont icon-shangyi",{disabled:0===e}]),onClick:b((i=>v.changeIndexNftFavoriteGroup(t,e,-1)),["stop"])},null,10,be),n("i",{class:C(["iconfont icon-xiayi",{disabled:e+1===v.groups.length}]),onClick:b((i=>v.changeIndexNftFavoriteGroup(t,e,1)),["stop"])},null,10,ve)]),n("div",ge,[n("i",{class:"iconfont icon-ashbin",onClick:b((e=>v.removeNftFavoriteGroup(t)),["stop"])},null,8,ye)])])))),128)),x(r(G,{class:"empty",image:t.emptyNoDataLight,description:t.$t("emptyData")},null,8,["image","description"]),[[T,v.groups&&0===v.groups.length||!v.groups]])])])):p("",!0),r(S,{visible:h.visible1,"onUpdate:visible":e[2]||(e[2]=t=>h.visible1=t),selected:h.activeGroup,"onUpdate:selected":e[3]||(e[3]=t=>h.activeGroup=t),title:t.$t("pleaseSelectGroup"),groups:v.groups,onSelect:v.confirmSwitchGroup},null,8,["visible","selected","title","groups","onSelect"]),r(U,{visible:h.visible2,"onUpdate:visible":e[4]||(e[4]=t=>h.visible2=t),confirmSubmit:v.addNftFavoriteGroup},null,8,["visible","confirmSubmit"]),r(U,{visible:h.visible3,"onUpdate:visible":e[5]||(e[5]=t=>h.visible3=t),confirmSubmit:v.changeNftFavoriteGroupName},null,8,["visible","confirmSubmit"]),r(N,{visible:h.visible4,"onUpdate:visible":e[6]||(e[6]=t=>h.visible4=t),initRemark:h.curRemark,confirmSubmit:v.confirmEditRemark},null,8,["visible","initRemark","confirmSubmit"])],64)}],["__scopeId","data-v-2d249f2d"]]);t("default",e({name:"FavoriteManage",data(){return{active:this.$route.params.id||"1",activeType:this.$route.params.type||"1",show:!1,actions:[{name:"Token",value:"1"},{name:"NFT",value:"2"}]}},computed:{curComponent(){return"2"===this.activeType?ke:It},activeName(){return{1:"Token",2:"NFT"}?.[this.activeType]||"Token"}},methods:{select(t){this.activeType=t.value},back(){window?.main?.back?window?.main?.back?.():this.$router.go(-1)}}},[["render",function(t,e,d,h,u,p){const v=i("van-tab"),g=i("van-tabs"),y=i("van-icon"),k=i("van-nav-bar"),$=i("van-action-sheet");return a(),m(f,null,[r(k,{"left-text":"","left-arrow":"",onClickLeft:p.back,fixed:"",placeholder:"","safe-area-inset-top":"","z-index":"2"},{title:o((()=>[r(g,{class:"tab-top",active:u.active,"onUpdate:active":e[0]||(e[0]=t=>u.active=t),type:"card",color:"#fff",background:"#2C3254","title-active-color":"#878FBC","title-inactive-color":"#878FBC"},{default:o((()=>[r(v,{title:t.$t("favoriteManage"),name:"1"},null,8,["title"]),r(v,{title:t.$t("groupManage"),name:"2"},null,8,["title"])])),_:1},8,["active"])])),right:o((()=>[n("button",{class:"select-btn",onClick:e[1]||(e[1]=b((t=>u.show=!0),["stop"]))},[c(l(p.activeName)+" ",1),r(y,{name:"arrow-down"})])])),_:1},8,["onClickLeft"]),(a(),s(E(p.curComponent),{activeType:u.activeType,active:u.active},null,8,["activeType","active"])),r($,{show:u.show,"onUpdate:show":e[2]||(e[2]=t=>u.show=t),actions:u.actions,"cancel-text":t.$t("cancel"),onSelect:p.select,"close-on-click-action":""},null,8,["show","actions","cancel-text","onSelect"])],64)}],["__scopeId","data-v-3bb63cbc"]]))}}}))}();
